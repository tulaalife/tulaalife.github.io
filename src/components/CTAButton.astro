---
interface Props {
    href: string;
    label: string;
    icon?: string; // e.g. "↗", "→", or "✨"
    variant?: "solid" | "soft" | "ghost";
    size?: "md" | "lg";
    class?: string; // Allow external classes for positioning
}

const {
    href,
    label,
    icon = "↗",
    variant = "soft",
    size = "md",
    class: className,
} = Astro.props;
---

<a
    href={href}
    class:list={["cta", `cta--${variant}`, `cta--${size}`, className]}
>
    <span class="cta__content">
        <span class="cta__label">{label}</span>
        {
            icon && (
                <span aria-hidden="true" class="cta__icon">
                    {icon}
                </span>
            )
        }
    </span>
</a>

<style>
    /* ---- Base Structure ---- */
    .cta {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        font-family: var(--font-sans);
        font-weight: var(--fw-medium);
        letter-spacing: 0.01em;
        border-radius: 99px; /* Pill shape is more modern/premium than 14px */
        border: 1px solid transparent;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: all 0.25s cubic-bezier(0.2, 0.8, 0.2, 1);
        -webkit-tap-highlight-color: transparent;
        isolation: isolate;
    }

    .cta__content {
        display: flex;
        align-items: center;
        gap: 6px;
        z-index: 2;
    }

    /* ---- Sizes ---- */
    .cta--md {
        padding: 10px 20px;
        font-size: 0.94rem;
        min-height: 44px; /* Touch target accessibility */
    }
    .cta--lg {
        padding: 14px 28px;
        font-size: 1.05rem;
        min-height: 52px;
    }

    /* ---- Variants ---- */

    /* 1. Solid: The Primary Action */
    .cta--solid {
        background: var(--fg); /* Dark background */
        color: var(--bg1); /* Light text */
        border-color: var(--fg);
        /* Subtle inner light reflection for 3D feel */
        box-shadow:
            inset 0 1px 1px rgba(255, 255, 255, 0.15),
            0 4px 10px rgba(0, 0, 0, 0.08);
    }
    .cta--solid:hover {
        transform: translateY(-2px);
        box-shadow:
            inset 0 1px 1px rgba(255, 255, 255, 0.2),
            0 12px 24px rgba(0, 0, 0, 0.15);
        background: color-mix(
            in oklch,
            var(--fg),
            black 5%
        ); /* Slightly darker on hover */
    }

    /* 2. Soft: The Secondary Action (Glassy) */
    .cta--soft {
        background: color-mix(in oklch, var(--card), transparent 20%);
        color: var(--fg);
        border-color: color-mix(in oklch, var(--ring), transparent 40%);
        backdrop-filter: blur(8px);
    }
    .cta--soft:hover {
        background: var(--card);
        border-color: var(--accent);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06);
    }

    /* 3. Ghost: Minimal (Just text) */
    .cta--ghost {
        background: transparent;
        color: var(--muted);
        border-color: transparent;
        padding-inline: 4px;
    }
    .cta--ghost:hover {
        color: var(--accent);
        background: color-mix(in oklch, var(--accent), transparent 95%);
    }

    /* ---- Icon Animation (The Polish) ---- */
    .cta__icon {
        display: inline-block;
        font-size: 1.1em;
        transition: transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
        will-change: transform;
    }

    /* On hover, move the arrow up-right */
    .cta:hover .cta__icon {
        transform: translate(3px, -3px);
    }

    /* If icon is just an arrow right, move just right */
    .cta:hover .cta__icon:not(:contains("↗")) {
        /* Fallback for standard arrows if needed, 
            though the translate(3px, -3px) looks cool for most icons */
    }

    /* ---- Active State (Tactile Click) ---- */
    .cta:active {
        transform: translateY(0) scale(0.98);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    /* ---- Accessibility ---- */
    .cta:focus-visible {
        outline: none;
        box-shadow: 0 0 0 4px
            color-mix(in oklch, var(--accent), transparent 70%);
    }
</style>
