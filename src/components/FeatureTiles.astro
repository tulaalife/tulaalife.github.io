---
// components/FeatureTiles.astro
interface Tile {
    emoji: string;
    title: string;
    subtitle: string;
    href?: string;
}
interface Props {
    title?: string;
    tiles: Tile[];
}

const { title = "More ways Tulaa helps", tiles } = Astro.props;
---

<section class="more" aria-labelledby="more">
    <h2 id="more" class="more__title">{title}</h2>

    <div class="more__wrap">
        <ul class="more__grid" role="list">
            {
                tiles.map((t) => (
                    <li class="tile">
                        {t.href ? (
                            <a href={t.href} class="tile__link">
                                <div class="tile__row">
                                    <div class="tile__emoji" aria-hidden="true">
                                        <span class="badge">{t.emoji}</span>
                                    </div>
                                    <div class="tile__text">
                                        <div class="tile__title">{t.title}</div>
                                        <div class="tile__sub">
                                            {t.subtitle}
                                        </div>
                                    </div>
                                    <div class="tile__chev" aria-hidden="true">
                                        ›
                                    </div>
                                </div>
                            </a>
                        ) : (
                            <div
                                class="tile__link"
                                role="img"
                                aria-label={`${t.title} — ${t.subtitle}`}
                            >
                                <div class="tile__row">
                                    <div class="tile__emoji" aria-hidden="true">
                                        <span class="badge">{t.emoji}</span>
                                    </div>
                                    <div class="tile__text">
                                        <div class="tile__title">{t.title}</div>
                                        <div class="tile__sub">
                                            {t.subtitle}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </li>
                ))
            }
        </ul>
    </div>
</section>

<style>
    :root {
        --tile-max: 820px;
        --tile-bg: color-mix(in oklab, var(--card) 86%, transparent);
        --tile-border: color-mix(in oklab, var(--ring) 72%, transparent);
        --tile-hover-border: color-mix(
            in oklab,
            var(--ring) 55%,
            var(--text) 8%
        );
        --tile-glow: color-mix(in oklab, var(--btn) 20%, transparent);
        --badge-bg: color-mix(in oklab, var(--btn) 22%, var(--card) 78%);
    }

    .more {
        width: var(--wrap, min(100%, var(--container)));
        margin: 32px auto;
        text-align: center;
    }

    .more__title {
        margin: 0 0 14px;
        font-size: clamp(20px, 2.4vw, 28px);
        font-weight: 800;
        letter-spacing: 0.01em;
    }

    .more__wrap {
        padding: clamp(10px, 1.8vw, 16px);
        background: radial-gradient(
                900px 300px at 50% -60px,
                color-mix(in oklab, var(--tile-glow) 18%, transparent),
                transparent 70%
            ),
            color-mix(in oklab, var(--surface) 97%, transparent);
    }

    .more__grid {
        list-style: none;
        padding: 0; /* <-- removes the left gutter */
        margin: 0;
        display: grid; /* <-- make the columns work */
        grid-template-columns: minmax(280px, var(--tile-max));
        justify-content: center;
        gap: clamp(12px, 1.6vw, 16px);
    }

    /* Card: a touch slimmer + centered stack */
    .tile__link {
        padding: 18px 20px;
        max-width: var(--tile-max);
        margin-inline: auto; /* centers the block inside grid */
    }

    /* Emoji badge: slightly smaller & elevated */
    .badge {
        width: 40px;
        height: 40px; /* was 44 */
        border-radius: 12px;
        font-size: 20px; /* was 22 */
        margin-bottom: 8px; /* was 10 */
        box-shadow:
            0 6px 18px rgba(0, 0, 0, 0.06),
            0 1px 0 rgba(255, 255, 255, 0.25) inset;
    }

    /* Centered horizontal layout */
    .tile__link {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        background: linear-gradient(
                180deg,
                color-mix(in oklab, var(--tile-bg) 95%, transparent),
                var(--tile-bg)
            ),
            radial-gradient(
                120% 240% at 10% -40%,
                color-mix(in oklab, var(--btn) 6%, transparent),
                transparent 70%
            );
        border: 1px solid var(--tile-border);
        border-radius: 18px;
        padding: 22px 20px;
        text-decoration: none;
        color: inherit;
        box-shadow:
            0 1px 0 rgba(0, 0, 0, 0.04) inset,
            0 0 0 rgba(0, 0, 0, 0);
        transition:
            transform 140ms ease,
            box-shadow 140ms ease,
            border-color 140ms ease,
            background 200ms ease;
        -webkit-tap-highlight-color: transparent;
    }

    .tile__link:hover {
        transform: translateY(-1px) scale(1.002);
        box-shadow:
            0 12px 28px rgba(0, 0, 0, 0.07),
            0 1px 0 rgba(255, 255, 255, 0.08) inset;
    }

    .tile__link:active {
        transform: translateY(0);
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.06);
    }

    .tile__link:focus-visible {
        outline: none;
        border-color: color-mix(
            in oklab,
            var(--btn) 50%,
            var(--tile-hover-border)
        );
        box-shadow: 0 0 0 3px color-mix(in oklab, var(--btn) 30%, transparent);
    }

    .tile__text {
        text-align: center;
    }

    .tile__title {
        font-weight: 800;
        font-size: clamp(16px, 1.7vw, 17px); /* a hair smaller for symmetry */
    }
    .tile__sub {
        margin-top: 6px; /* a tad more breathing room */
        font-size: 14px;
        opacity: 0.9;
    }

    .tile__chev {
        display: none;
    }

    @media (prefers-reduced-motion: reduce) {
        .tile__link {
            transition: none;
        }
    }
</style>
