---
import { yogaPlans } from "../../data/generated";

export async function getStaticPaths() {
    // 1. Filter to keep ONLY English plans.
    // This prevents duplicate slug errors and ensures we target the /en/ version.
    const englishPlans = yogaPlans.filter((p) => p.language === "en");

    return englishPlans.map((p) => ({
        params: { slug: p.slug },
    }));
}

const { slug } = Astro.params;

// 2. Perform the redirect
// In static builds, this automatically generates an HTML page with a meta-refresh tag.
return Astro.redirect(`/en/yoga/${slug}`);
---
