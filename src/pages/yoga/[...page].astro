---
import YogaListing from "../../components/YogaListing.astro";
import { yogaPlans } from "../../data/generated";
import type { Page, GetStaticPaths } from "astro";

interface Props {
    page: Page<(typeof yogaPlans)[number]>;
}

export const getStaticPaths = (async ({ paginate }) => {
    const englishPlans = yogaPlans.filter((p) => p.language === "en");
    return paginate(englishPlans, { pageSize: 20 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
const lang = "en";

const t = {
    title: "Yoga Plans",
    description:
        "Expert-guided sequences for every need — from pain relief to prenatal care.",
    view: "View Plan",
    prev: "← Previous",
    next: "Next →",
    metaPage: "Page",
};

const pageTitle = `${t.title} · ${t.metaPage} ${page.currentPage}`;
const canonical =
    page.currentPage === 1 ? `/en/yoga` : `/en/yoga/${page.currentPage}`;
---

<YogaListing
    page={page}
    title={pageTitle}
    description={t.description}
    canonicalPath={canonical}
    lang={lang}
    labels={t}
/>
