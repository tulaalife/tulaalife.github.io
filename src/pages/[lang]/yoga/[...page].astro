---
import YogaListing from "../../../components/YogaListing.astro";
import { yogaPlans } from "../../../data/generated";
import type { Page, GetStaticPaths } from "astro";

interface Props {
    page: Page<(typeof yogaPlans)[number]>;
}

export const getStaticPaths = (async ({ paginate }) => {
    const languages = ["en", "hi"];
    return languages.flatMap((lang) => {
        const langPlans = yogaPlans.filter((p) => p.language === lang);
        return paginate(langPlans, { params: { lang }, pageSize: 20 });
    });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
const { lang } = Astro.params;

const LABELS = {
    hi: {
        title: "योग कार्यक्रम",
        description:
            "हर ज़रूरत के लिए विशेषज्ञ-निर्देशित क्रम — दर्द निवारण से लेकर प्रसव पूर्व देखभाल तक।",
        view: "योजना देखें",
        prev: "← पिछला",
        next: "अगला →",
        metaPage: "पेज",
    },
};

const t = LABELS[lang as keyof typeof LABELS] || {
    title: "Yoga Plans",
    description:
        "Expert-guided sequences for every need — from pain relief to prenatal care.",
    view: "View Plan",
    prev: "← Previous",
    next: "Next →",
    metaPage: "Page",
};

const pageTitle = `${t.title} · ${t.metaPage} ${page.currentPage}`;
const canonical =
    page.currentPage === 1
        ? `/${lang}/yoga`
        : `/${lang}/yoga/${page.currentPage}`;
---

<YogaListing
    page={page}
    title={pageTitle}
    description={t.description}
    canonicalPath={canonical}
    lang={lang}
    labels={t}
/>
