---
import Site from "../../layouts/Site.astro";
import CTAButton from "../../components/CTAButton.astro";
import { guidedAudios } from "../../data/generated";

export async function getStaticPaths() {
    return guidedAudios.map((a) => ({
        params: { slug: a.slug },
        props: { audio: a },
    }));
}

const { audio } = Astro.props;
const canonical = `/audio/${audio.slug}`;
---

<Site
    title={`${audio.title} · Guided Audio · Tulaa`}
    description={audio.teaser || "Gentle audio preview from Tulaa."}
    canonicalPath={canonical}
>
    <main class="wrap" style="max-width:940px;margin:0 auto;padding:24px;">
        <a href="/audio" class="audio-back">← All Guided Audios</a>

        <header style="margin-top:12px;">
            <h1 class="audio-title">{audio.title}</h1>
        </header>

        <img
            src={audio.image}
            alt={audio.title}
            width="1200"
            height="630"
            loading="eager"
            style="width:100%;height:auto;border-radius:12px;margin:16px 0;"
        />

        {audio.subtitle && <p class="audio-sub">{audio.subtitle}</p>}
        {audio.teaser && <p class="audio-teaser">{audio.teaser}</p>}

        <div style="margin-top:18px;display:flex;gap:10px;flex-wrap:wrap;">
            <CTAButton
                href={audio.deeplink}
                label="Open in Tulaa app"
                variant="soft"
                size="md"
            />
            <CTAButton
                href="/audio"
                label="Browse more audios"
                variant="soft"
                size="md"
            />
        </div>
    </main>
</Site>

<style>
    .audio-title {
        margin: 6px 0 10px;
        font-family: var(--font-sans);
        font-size: var(--fs-h1);
        font-weight: var(--fw-bold);
    }

    .audio-sub,
    .audio-teaser {
        font-family: var(--font-sans);
        font-size: var(--fs-body-lg);
        line-height: var(--lh-body);
        color: var(--muted);
        margin: 12px 0 20px;
    }

    .audio-back {
        font-family: var(--font-sans);
        font-size: var(--fs-body);
        color: var(--accent);
        text-decoration: none;
    }
    .audio-back:hover {
        text-decoration: underline;
    }
</style>
