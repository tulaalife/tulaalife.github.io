---
import Site from "../../layouts/Site.astro";
import { guidedAudios } from "../../data/generated";

export async function getStaticPaths() {
    return guidedAudios.map((a) => ({
        params: { slug: a.slug },
        props: { audio: a },
    }));
}

const { audio } = Astro.props;
const canonical = `/audio/${audio.slug}`;
---

<Site
    title={`${audio.title} · Guided Audio · Tulaa`}
    description={audio.teaser || "Gentle audio preview from Tulaa."}
    canonicalPath={canonical}
>
    <main class="wrap" style="max-width:840px;margin:0 auto;padding:24px;">
        <a href="/audio" style="text-decoration:none;">← All Guided Audios</a>

        <header style="margin-top:12px;">
            <h1 style="margin:6px 0 10px;">{audio.title}</h1>
        </header>

        <img
            src={audio.image}
            alt={audio.title}
            width="1200"
            height="630"
            loading="eager"
            style="width:100%;height:auto;border-radius:12px;margin:16px 0;"
        />

        {
            audio.teaser && (
                <p style="font-size:1.05rem;line-height:1.7;margin:12px 0 18px;">
                    {audio.teaser}
                </p>
            )
        }

        <div style="margin-top:18px;display:flex;gap:10px;flex-wrap:wrap;">
            <a
                href={audio.deeplink}
                style="padding:10px 14px;border:1px solid var(--ring);border-radius:10px;text-decoration:none;"
            >
                Open in Tulaa app
            </a>
            <a
                href="/audio"
                style="padding:10px 14px;border:1px solid var(--ring);border-radius:10px;text-decoration:none;"
            >
                Browse more audios
            </a>
        </div>
    </main>
</Site>
